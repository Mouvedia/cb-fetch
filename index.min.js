!(function(e,t){"function"==typeof define&&define.amd?define(["@string/isstring"],t):"object"==typeof exports&&exports&&!exports.nodeType?(require("@string/isstring"),"object"==typeof module&&module&&module.exports?module.exports=t():exports["default"]=t()):"function"==typeof YUI&&YUI.add?YUI.add("cb-fetch",function(e){e["default"]=t()},"1.10.0"):e.request?self.console&&self.console.warn&&self.console.warn("Module registration aborted! %O already exists.",e.request):e.request=t()})(function(){try{return Function("return this")()||(0,eval)("this")}catch(e){return self}}(),(function(){return function(e){function t(e){self.console&&self.console.error&&self.console.error(e.message||e.description||e)}function n(e,t){throw t=t||"TypeError",new(self[t]||self.Error)(e)}function o(){var a="omit"===V.credentials?{mozAnon:!0}:void 0,f=/^(GET|POST|HEAD|PUT|DELETE|MOVE|PROPFIND|PROPPATCH|MKCOL|COPY|LOCK|UNLOCK|OPTIONS)$/;if(self.XMLHttpRequest/*@cc_on@if(@_jscript_version<9)&&f.test(V.method)@else &&(self.WorkerGlobalScope||document.documentMode>=9||f.test(V.method))@end@*/){if(a&&self.AnonXMLHttpRequest)return new AnonXMLHttpRequest;try{return new XMLHttpRequest(a)}catch(err){return new XMLHttpRequest}}/*@cc_on@if(@_jscript_version>=5)else{var p=['Msxml2.XMLHTTP.6.0','Msxml2.XMLHTTP.3.0','Microsoft.XMLHTTP'];for(var i=0;i<p.length;++i){try{return new ActiveXObject(p[i])}catch(err){}}}@end@*/}function r(e,t){V.url+=self.encodeURIComponent(e),null!==t&&(V.url+="="+self.encodeURIComponent(t))}function s(){var e=/^[^?]+\?/.test(V.url)?"&":"?";return function(t,n){if(void 0!==n){if(V.url+=e,n&&n.constructor===Array)for(var o=n.length,s=0,a=0;s<o;++s)"undefined"!=typeof n[s]&&(a&&(V.url+="&"),r(t+"["+a+++"]",n[s]));else r(t,n);e="&"}}}function a(e){var t=s();if(self.URLSearchParams&&"[object URLSearchParams]"===Object.prototype.toString.call(e)&&(e=e.toString()),e&&String.isString(e)){var n,o,r=e.split("&"),a=r.length;for(o=0;o<a;++o)n=r[o].split("="),t(n[0],n[1])}else if("object"==typeof e)for(var i in e)t(i,e[i])}function i(){var e=V.headers,t=V.method,n=/^(HEAD|OPTIONS|PROPFIND|REPORT|SEARCH)$/.test(t),o=/^(PUT|MERGE|PATCH|DELETE)$/.test(t);V.method=n?"GET":"POST",self.Headers&&"[object Headers]"===Object.prototype.toString.call(e)?(e.set("X-HTTP-Method-Override",t),e.set("X-METHOD-OVERRIDE",t),o&&e.set("X-HTTP-Method",t)):(e["X-HTTP-Method-Override"]=t,e["X-METHOD-OVERRIDE"]=t,o&&(e["X-HTTP-Method"]=t))}function u(e,t){for(var n in e)if(n.toLowerCase()===t.toLowerCase()&&e[n])return e[n]}function c(e,t){var n=V.headers;self.Headers&&"[object Headers]"===Object.prototype.toString.call(n)?n.get(e)||n.set(e,t):u(n,e)||(n[e]=t)}function l(e,t,n){var o="cookie"===t.toLowerCase()?"; ":", ";n&&(e[t]=e[t]?e[t]+o+n:n)}function d(e){var t,n,o={};if(e.entries)for(t=e.entries();!(n=t.next()).done;)l(o,n.value[0],n.value[1]);return o}function f(e){var t,n={};if("cors"!==V.mode&&c("X-Requested-With","XMLHttpRequest"),self.URLSearchParams&&"[object URLSearchParams]"===Object.prototype.toString.call(V.body)&&c("Content-Type","application/x-www-form-urlencoded"),self.Headers&&"[object Headers]"===Object.prototype.toString.call(V.headers))n=d(V.headers);else for(t in V.headers)l(n,t,V.headers[t]);for(t in n)e.setRequestHeader(t,n[t])}function p(e){if(e)if(e.parseError&&0!=e.parseError)t("XML Parsing Error: "+e.parseError.reason);else if(e.documentElement&&"parsererror"===e.documentElement.tagName)t(e.documentElement.firstChild.data.split("\n",1)[0]);else if(e.documentElement)return e;return null}function m(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e),n.set(t,e.byteLength),t.length?n:n.buffer}function h(e,t){return e.byteLength?m(t,e):e.length?t+e:void 0}function y(e,t){return e.length?e.slice(t.length):e.slice?e.slice(t.size):e.mozSlice?e.mozSlice(t.size):void 0}function g(e){function t(e){return"boolean"!=typeof r&&(r=e.totalSize?0x10000000000000000!==e.totalSize:!!e.lengthComputable),{chunk:a,aggregate:i,loaded:e.loaded||e.position,total:r?e.total||e.totalSize:0,lengthComputable:r}}var n,o,r,s,a,i;self.AnonXMLHttpRequest&&!V.responseMediaType&&(V.responseMediaType="application/octet-stream"),e.onprogress=function(r){var u="undefined"==typeof e.response?e.responseText:e.response;"boolean"!=typeof s&&(s="string"==typeof e.responseType&&~e.responseType.indexOf("chunked")),i?(a=s?u:y(u,i),i=s?h(u,i):u):a=i=u,(r.loaded||r.position)&&(K.download(t(r)),n=r.loaded,o=r.total)},e.onload=function(t){var r="undefined"==typeof e.response?e.responseText:e.response,s=t.loaded||o||r&&r.size||+q("content-length");"number"!=typeof t.loaded||s<=n||K.download({chunk:i?r.slice(i.length):r,aggregate:r,loaded:s,total:s,lengthComputable:!!s})}}function b(e,t,n){K.download({chunk:e,aggregate:t,loaded:t.length,total:n||0,lengthComputable:!!n})}function T(e){var t=self.document.createElement("a");return t.href=e,self.location.protocol+t.href.replace(/^https?:/,"")}function M(e){return self.URL&&"[object URL]"===Object.prototype.toString.call(e)&&(e=e.href),/^([a-z][-a-z\d+.]+:)?\/\//i.test(e)}function R(){function e(e,n){G[e]&&G[e](n),K.loadend&&K.loadend(),t=function(){}}var t,n,o=XDomainRequest.create();return t=function(){o.abort(),e("abort")},o.ontimeout=function(){e("timeout")},o.onerror=function(){e("error",{instance:o})},o.onprogress=K.download?function(){var e=o.responseText;b(n?e.slice(n):e,e),n=e.length}:function(){},o.onload=function(){G.success&&(J.headers={"Content-Type":o.contentType},J.body=X(o)),e("success",J)},V.timeout&&(o.timeout=V.timeout),o.open(V.method,T(V.url)),J.instance=o,o.send(),function(){t()}}function v(e){if("string"==typeof e.responseType)switch(e.responseType){case"text":case"":return e.responseText;case"document":case"msxml-document":return p(e.responseXML);default:return"undefined"==typeof e.response?e.responseText:e.response}return"object"==typeof e.responseXML&&e.responseXML?p(e.responseXML):"string"==typeof e.responseText?e.responseText:void 0}function E(e){return e.status>=200&&e.status<300||304==e.status||1223==e.status||0==e.status&&v(e)||"NOT MODIFIED"===e.statusText?"success":"error"}function L(){function e(e,t){G[e]&&G[e](t),!i&&K.loadend&&K.loadend()}function n(e){r&&clearTimeout(r),s&&(e&&"timeout"===e.type?G.timeout&&G.timeout():a||G.abort&&G.abort(),s.onreadystatechange=function(){},s.abort(),i||a||K.loadend&&K.loadend())}var r,s=o(),a="undefined"!=typeof s.onabort,i="undefined"!=typeof s.onloadend;if(self.attachEvent&&attachEvent("onunload",n),s.onreadystatechange=function(){var o,a;if(4==s.readyState){r&&clearTimeout(r),self.detachEvent&&detachEvent("onunload",n),s.onreadystatechange=function(){};try{o=E(s),a=C(s)}catch(err){t(err)}finally{a?e(o,a):e("error",{instance:s})}s=null}},K.download&&"undefined"!=typeof s.onprogress&&g(s),a&&(s.onabort=function(){e("abort")}),K.loadend&&i&&(s.onloadend=K.loadend),V.multipart&&"boolean"==typeof s.multipart&&(s.multipart=!0),s.open(V.method,V.url,!0),V.responseType)try{s.responseType=V.responseType}catch(err){t(err)}return"include"===V.credentials&&"boolean"==typeof s.withCredentials&&(s.withCredentials=!0),V.responseMediaType&&s.overrideMimeType&&s.overrideMimeType(V.responseMediaType),"undefined"!=typeof s.setRequestHeader&&f(s),V.timeout&&("number"==typeof s.timeout?(s.timeout=V.timeout,s.ontimeout=function(){e("timeout")}):r=setTimeout(function(){n({type:"timeout"})},V.timeout)),s.send(/^(HEAD|GET)$/.test(V.method)?null:V.body||""),n}function w(e){return e&&(G.abort&&e.signal.addEventListener("abort",G.abort,{once:!0}),V.signal=e.signal),Promise.race([fetch(V.url,V),new Promise(function(e,t){V.timeout&&setTimeout(function(){t({name:"TimeoutError",code:23})},V.timeout)})])}function x(){var e=W&&new AbortController,o=function(){r&&e.abort()},r=!0;return w(e).then(S).then(function(e){return r=!1,e}).then(H).then(D).then(O).then(P)["catch"](function(n){r=!1,23===n.code&&G.timeout&&G.timeout(),e&&e.signal.aborted||23===n.code?K.loadend&&K.loadend():t(n)}),e?o:n.bind(null,"An abort callback must be provided.")}function P(e){e.ok||304==e.status?G.success&&G.success(J):G.error&&G.error(J),K.loadend&&K.loadend()}function O(e){return J.body=e,J.instance}function D(e){switch(V.responseType){case"text":case"":return e.text();case"document":return e.text().then(function(e){return j(e)});case"json":return e.json();case"arraybuffer":return e.arrayBuffer();case"blob":if(self.Response.prototype.blob)return e.blob();break;case"formdata":if(self.Response.prototype.formData)return e.formData()}return e.body||null}function S(e){function t(e){if(e.done)return o;var a=e.value;return n=n?m(n,a):a,b(a,n,s),r.read().then(t)}if(!K.download)return e;var n,o=e.clone(),r=e.body.getReader(),s=+e.headers.get("Content-Length");return r.read().then(t)}function H(e){return J.instance=e,J.headers=d(e.headers),J.statusCode=e.status,J.statusText=e.statusText,J.url=e.url,e}function C(e){return J.instance=e,J.headers="undefined"==typeof e.getResponseHeader?{}:I(e),J.statusCode=1223===e.status?204:e.status,J.statusText=1223===e.status?"No Content":e.statusText,J.url=e.responseURL,J.body=X(e),J}function X(e){var t=v(e);switch(V.responseType){case"document":case"msxml-document":if("string"==typeof t)return j(t);break;case"json":if("object"!=typeof t)try{return self.JSON.parse(t)}catch(err){}}return t}function j(e){var t,n,o,r=["MSXML2.DOMDocument.6.0","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","Microsoft.XMLDOM","MSXML.DOMDocument"],s=V.XSLPattern?"XSLPattern":"XPath",a=self.document&&self.document.implementation,i=U(),u=null;if(a&&a.createLSParser){t=a.createLSParser(1,null),n=a.createLSInput(),n.stringData=e;try{return t.parse(n)}catch(err){}}else if(self.DOMParser){try{u=(new DOMParser).parseFromString(e,i)}catch(err){}if(!u&&"text/html"===i)return A(e);if(u&&u.getElementsByTagName("parsererror").length)return null}else if(self.ActiveXObject)for(o=0;r[o];++o){try{u=new ActiveXObject(r[o])}catch(err){continue}o<3&&u.setProperty("NewParser",!0),3===o&&u.setProperty("SelectionLanguage",s);try{u.setProperty("ProhibitDTD",!1)}catch(err){}return u.async=!1,u.loadXML(e)?u:null}return u}function A(e){var t,n,o=self.document.implementation;o.createHTMLDocument?t=o.createHTMLDocument(null,"",null):(n=o.createDocumentType("html","",""),t=o.createDocument("","html",n));try{t.documentElement.innerHTML=e}catch(err){t=new ActiveXObject("htmlfile"),t.open(),t.write(e),t.close()}return t}function U(){var e=V.responseMediaType||u(J.headers,"Content-Type"),t=e&&e.split(";",1)[0];switch(t){case"text/html":case"text/xml":case"application/xml":case"application/xhtml+xml":case"image/svg+xml":return t;default:return"text/xml"}}function q(e){try{return J.instance.getResponseHeader(e)}catch(err){}}function I(e){var t,n,o,r,s,a,i,u={},c=e.getAllResponseHeaders(),l=!c&&q("Access-Control-Expose-Headers");if("cors"===V.mode&&null===c){if(u["Cache-Control"]=e.getResponseHeader("Cache-Control"),u["Content-Language"]=e.getResponseHeader("Content-Language"),u["Content-Type"]=e.getResponseHeader("Content-Type"),u.Expires=e.getResponseHeader("Expires"),u["Last-Modified"]=e.getResponseHeader("Last-Modified"),u.Pragma=e.getResponseHeader("Pragma"),l&&"*"!==l)for(l=l.replace(/\s+/g,"").split(","),i=0,o=l.length;i<o;++i)s=l[i],(a=q(s))&&(u[s]=a)}else if(c)for(t=c.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/),o=t.length-1,i=0;i<o;++i)n=t[i],(r=n.indexOf(": "))>0&&(s=n.substring(0,r).toLowerCase(),a=n.substring(r+2),u[s]=a);return u}function k(e){var t=e.split("//")[1].split("@")[0].split(":");return V.username||(V.username=t[0],V.password=t[1]),e.replace(/\/\/[^/]+@/,"//")}function z(e){e=e.split("#")[0],/\?$/.test(e)&&(e=e.slice(0,-1)),/^([^#?]+:)?\/\/[^/]+@/.test(e)&&(e=k(e)),V.url=e}function N(e){String.isString(e)?z(e):self.URL&&"[object URL]"===Object.prototype.toString.call(e)&&e.href&&z(e.href)}function B(e,t){var n=M(e),o=(n?e:self.location.href).split(/[#?]/)[0],r=(n?o:B(o,e)).split("/"),s=t.split("/");if(r.length>3&&(r=r.slice(0,r.length-1)),/^\.\//.test(t))o=r.join("/")+t.slice(1);else if("/"===t.charAt(0))o=r[0]+"//"+r[2]+t;else{for(;".."===s[0]&&3!==r.length;)r=r.slice(0,r.length-1),s=s.slice(1);o=r.join("/")+"/"+s.join("/")}return o}function $(){var e=V.method&&V.method.toUpperCase()||"GET",t=(V.body?V.body.ownerDocument||V.body:0).documentElement;return/^(PROPPATCH|ORDERPATCH|ACL|REPORT|BIND|UNBIND|REBIND|UPDATE|LABEL|MERGE|MKREDIRECTREF|UPDATEREDIRECTREF)$/.test(e)&&!t&&n("The "+e+" method requires an XML body."),e}function F(e){Y[e]=function(t){var n=!/^(get|head|delete)$/.test(e),o=n?"send":"query",r={};return M(t)?N(t):String.isString(t)&&z(B(V.url,t)),V.method=e.toUpperCase(),r[o]=function(e){return n?V.body=e||V.body:e&&(a(V.parameters),a(e),delete V.parameters),{done:Y.done,hook:Y.hook}},r.done=Y.done,r.hook=Y.hook,r}}var G,Y={},V={},J={},K={},W=self.Request&&Request.prototype.hasOwnProperty("signal"),Q=self.Response&&Response.prototype.hasOwnProperty("body"),Z=self.hasOwnProperty&&self.hasOwnProperty("ActiveXObject")&&self.navigator.msPointerEnabled,_=self.document&&"boolean"==typeof self.document.mozFullScreen&&!IDBIndex.prototype.count;return Y.done=function(e,t){return G="object"==typeof e&&e||{success:e,error:t},V.tunneling&&!/^(POST|GET)$/.test(V.method)&&i(),V.parameters&&a(V.parameters),V.username&&c("Authorization","Basic "+self.btoa(V.username+":"+(V.password||""))),K.loadstart&&!1===K.loadstart()?function(){}:/^(moz|ms)/.test(V.responseType)?L():"function"!=typeof self.fetch||!W&&G.abort||!Q&&K.download?"cors"!==V.mode||!self.document||8!=self.document.documentMode&&9!=self.document.documentMode?L():R():x()},Y.hook=function(e,t){return K[e]=t,{hook:Y.hook,done:Y.done}},F("post"),F("put"),F("patch"),F("get"),F("head"),F("delete"),function(e){e&&(N(e),V.url||e!==Object(e)||(V=e,V.url&&N(V.url)))}(e),function(){V.method=$(),V.mode=V.mode||"same-origin",V.credentials=V.credentials||"same-origin",V.headers=V.headers||{},V.username=V.username||null,V.password=V.password||null,V.redirect=V.redirect||"follow",V.url||z(self.location.href),"msxml-document"!==V.responseType||Z?"json"===V.responseType&&_&&(V.responseType="moz-json"):V.responseType="document"}(),Y}}));